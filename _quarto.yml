project:
  type: website
  output-dir: _site
  render:
    - en/
    - fr/
    - index.html

# Load multilingual extension
extensions:
  - multilang

website:
  title: "RaphaÃ«l Simon"
  description: "Personal website - Medicine, Public Health, Software Engineering, Data Science"
  site-url: https://raphaelsimon.fr
  favicon: images/favicon.jpg

  # Search functionality (uses Quarto defaults: s, f, /)
  search:
    location: navbar
    type: overlay

  # Top navigation
  navbar:
    background: dark
    left:
      - text: Blog
        href: en/blog/index.qmd
      - text: About
        href: en/about.qmd
      - text: Contact
        href: en/contact.qmd
    right:
      - icon: github
        href: https://github.com/rplsmn
        aria-label: GitHub
      - icon: linkedin
        href: https://linkedin.com/in/raphael-simon-md
        aria-label: LinkedIn
      - icon: bluesky
        href: https://bsky.app/profile/raphsmn.bsky.social
        aria-label: Bluesky
      - icon: rss
        href: en/blog/index.xml
        aria-label: RSS Feed
      - text: |
          <div class="lang-switcher">
            <span class="current-lang" id="navbar-flag"></span>
            <button class="lang-globe" aria-label="Switch language">ğŸŒ</button>
            <div class="lang-dropdown">
              <a href="/en/" class="lang-option" data-lang="en">ğŸ‡¬ğŸ‡§ English</a>
              <a href="/fr/" class="lang-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</a>
            </div>
          </div>
          <script>
          (function() {
            var currentLang = window.location.pathname.startsWith('/fr') ? 'fr' : 'en';
            var flag = document.getElementById('navbar-flag');
            if (flag) flag.textContent = currentLang === 'en' ? 'ğŸ‡¬ğŸ‡§' : 'ğŸ‡«ğŸ‡·';
            document.querySelectorAll('.navbar .lang-option').forEach(function(opt) {
              var lang = opt.getAttribute('data-lang');
              if (lang === currentLang) {
                opt.href = '#';
                opt.classList.add('current');
              } else {
                var path = window.location.pathname.replace(/^\/(en|fr)/, '');
                opt.href = path.match(/^\/blog\/posts\//) ? '/' + lang + '/' : '/' + lang + path;
              }
            });
          })();
          </script>

  # Footer
  page-footer:
    left: |
      Â© 2026 RaphaÃ«l Simon
    right: |
      {{< lang-switch >}}

  # Enable back-to-top button
  back-to-top-navigation: true

# Theme with dark mode default
format:
  html:
    theme:
      dark: darkly
      light: flatly
    css: styles.css
    toc: true
    code-copy: true
    code-overflow: wrap
    include-after-body: _includes/lang-switcher-script.html

# Analytics (optional - add when ready)
# google-analytics: "G-XXXXXXXXXX"
