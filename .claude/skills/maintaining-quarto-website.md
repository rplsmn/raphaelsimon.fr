---
name: maintaining-quarto-website
description: Use when working on raphaelsimon.fr Quarto website - covers multilingual FR/EN structure, blog posts, language switcher, translation banners, hreflang SEO, and content workflows.
---

# Maintaining raphaelsimon.fr (Multilingual Quarto Website)

## Project Structure

```
raphaelsimon.fr/
â”œâ”€â”€ _quarto.yml              # Main config (shared across languages)
â”œâ”€â”€ index.html               # Root redirect (browser language detection)
â”œâ”€â”€ translations.yml         # NOT USED - Quarto's _language.yml handles UI strings
â”œâ”€â”€ _data/
â”‚   â””â”€â”€ translations-manifest.json  # Generated by pre-render script
â”œâ”€â”€ _extensions/
â”‚   â””â”€â”€ multilang/           # Custom Lua filters + shortcodes
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ build-manifest.py    # Pre-render script
â”œâ”€â”€ images/                  # Shared images
â”œâ”€â”€ styles.css               # Shared styles
â”œâ”€â”€ en/                      # English content
â”‚   â”œâ”€â”€ _metadata.yml        # lang: en
â”‚   â”œâ”€â”€ index.qmd
â”‚   â”œâ”€â”€ about.qmd
â”‚   â”œâ”€â”€ contact.qmd
â”‚   â”œâ”€â”€ thanks.qmd
â”‚   â””â”€â”€ blog/
â”‚       â”œâ”€â”€ index.qmd
â”‚       â””â”€â”€ posts/
â”‚           â””â”€â”€ hello-world/
â”‚               â””â”€â”€ index.qmd
â””â”€â”€ fr/                      # French content (mirrors /en/)
    â”œâ”€â”€ _metadata.yml        # lang: fr
    â”œâ”€â”€ index.qmd
    â”œâ”€â”€ about.qmd
    â”œâ”€â”€ contact.qmd
    â”œâ”€â”€ thanks.qmd
    â””â”€â”€ blog/
        â”œâ”€â”€ index.qmd
        â””â”€â”€ posts/
            â””â”€â”€ hello-world/
                â””â”€â”€ index.qmd
```

## Quick Reference

| Task | Location/Command |
|------|------------------|
| Create English post | `en/blog/posts/YYYY-MM-DD-slug/index.qmd` |
| Create French post | `fr/blog/posts/YYYY-MM-DD-slug/index.qmd` (same slug) |
| Preview site | `quarto preview` |
| Full render | `quarto render` (runs pre-render script automatically) |
| UI strings (TOC, search) | Automatic via `lang:` in `_metadata.yml` |
| Language switcher | `{{< lang-switch >}}` shortcode |

## Blog Post Frontmatter

```yaml
---
title: "Post Title"
description: "Brief description"
author: "RaphaÃ«l Simon"
date: 2026-02-04
categories: [category1, category2]
image: thumbnail.jpg
translation: none    # none = original/manual | machine = LLM-translated
hreflang:            # For SEO (auto-generated for posts, manual for static pages)
  en: "/en/blog/posts/hello-world/"
  fr: "/fr/blog/posts/hello-world/"
---
```

| Field | Values | Purpose |
|-------|--------|---------|
| `translation` | `none` / `machine` | Controls machine-translation banner |
| `hreflang` | URL map per language | SEO alternate language links |

## Creating Content

### New Blog Post (Both Languages)

1. Create English version:
   ```
   en/blog/posts/2026-02-04-my-topic/index.qmd
   ```

2. Create French version (same slug):
   ```
   fr/blog/posts/2026-02-04-my-topic/index.qmd
   ```

3. Set `translation: none` in both if hand-written
4. Set `translation: machine` if one is LLM-translated

### Single-Language Post

Create only in one language directory. The other language's blog listing won't show it. Language switcher links to homepage for that language.

### Static Pages

`about.qmd`, `contact.qmd`, `thanks.qmd` exist in both `/en/` and `/fr/`. Edit each file directly â€” form labels, prose, everything is in the file itself.

## Multilingual Components

### Language Switcher

Usage in templates/partials:
```
{{< lang-switch >}}
```

Renders: flag + globe dropdown. Reads manifest for blog posts, assumes equivalents exist for static pages.

### Translation Banner

Automatic via `translation-banner.lua` filter. When `translation: machine`:

> "Machine-translated â€” Original in: ðŸ‡«ðŸ‡·"

### hreflang SEO Tags

Automatic via `hreflang.lua` filter. Reads `hreflang` frontmatter and injects:
```html
<link rel="alternate" hreflang="en" href="..." />
<link rel="alternate" hreflang="fr" href="..." />
```

For blog posts: auto-generated by pre-render script.
For static pages: add manually to frontmatter once.

## Build Process

```yaml
# _quarto.yml
project:
  type: website
  pre-render:
    - scripts/build-manifest.py
```

Pre-render script:
1. Scans `/en/blog/posts/` and `/fr/blog/posts/`
2. Outputs `_data/translations-manifest.json`
3. Optionally auto-injects `hreflang` frontmatter

## UI String Translation

Quarto handles automatically via `lang:` setting:

```yaml
# en/_metadata.yml
lang: en

# fr/_metadata.yml
lang: fr
```

Built-in French translations for: TOC, search, listings, callouts, etc.

Override specific strings if needed:
```yaml
language:
  toc-title-document: "Sur cette page"
```

## RSS Feeds

Per-language:
- `/en/blog/index.xml`
- `/fr/blog/index.xml`

## Common Issues

| Problem | Solution |
|---------|----------|
| French UI strings in English | Check `lang: en` in `en/_metadata.yml` |
| Translation banner not showing | Verify `translation: machine` in frontmatter |
| Language switcher broken for post | Run `quarto render` to regenerate manifest |
| hreflang missing | Add to frontmatter or check pre-render script |

## File Naming Rules

- **All filenames are English** (even in `/fr/`)
- **Blog slugs identical across languages**: `hello-world` not `bonjour-monde`
- **Separate files per language** for all content (no suffix convention like `.fr.qmd`)

## Commands

| Command | Purpose |
|---------|---------|
| `quarto preview` | Live preview (may not run pre-render) |
| `quarto render` | Full render with pre-render script |
| `python scripts/build-manifest.py` | Manual manifest regeneration |
